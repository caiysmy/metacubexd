import{B as e,C as t,Ct as n,D as r,Et as i,H as a,J as o,K as s,L as c,N as l,U as u,V as d,bt as f,ct as p,et as m,it as h,mt as g,nt as _,ot as v,q as y,rt as b,st as x,tt as S,ut as C,w,x as T,xt as E,z as D}from"./BUwZQTr6.js";import{t as O}from"./_v7-ePgP.js";import{t as k}from"./Bxfoq5Is.js";import{t as A}from"./BaYFa2sV.js";import{A as j,S as M,_ as N,a as P,k as F}from"./BNAMIMxA.js";import{n as I,t as L}from"./BjXhW6l8.js";import{t as R}from"./CsZCIw88.js";import{a as z,i as B,l as V}from"./D2kYZRJ8.js";var H={class:`stat flex-1 place-items-center`},ee={class:`stat-title text-primary-content`},te={class:`stat-value w-full truncate text-center text-2xl text-primary-content lg:text-3xl`},U=o({__name:`TrafficWidget`,props:{label:{}},setup(t){return(r,i)=>(_(),u(`div`,H,[e(`div`,ee,n(t.label),1),e(`div`,te,[h(r.$slots,`default`)])]))}}),W=Object.assign(U,{__name:`TrafficWidget`}),G=i(R(),1),K={class:`relative h-full w-full`},q={key:0,class:`absolute inset-0 flex items-center justify-center`},J=o({__name:`RealtimeLineChart`,props:{title:{},seriesConfig:{},isLoading:{type:Boolean,default:!1},initialData:{default:()=>[]},valueMode:{default:`bytes`}},emits:[`chartReady`],setup(t,{expose:n,emit:r}){let i=t,o=r,s=(e,t=!1)=>i.valueMode===`number`?String(e):t?`${L(e).toString()}/s`:L(e).toString(),c=g(),l,d=k();function f(){let e=V();return{chart:{type:`areaspline`,animation:{duration:800,easing:`linear`},backgroundColor:e.backgroundColor},credits:{enabled:!1},accessibility:{enabled:!1},title:{text:i.title,style:{color:e.textColor}},legend:{enabled:!0,itemStyle:{color:e.textColor},itemHoverStyle:{color:e.textColorHover}},xAxis:{type:`datetime`,tickPixelInterval:100,labels:{style:{color:e.textColor},formatter(){let e=new Date(this.value);return`${e.getMinutes().toString().padStart(2,`0`)}:${e.getSeconds().toString().padStart(2,`0`)}`}},lineColor:e.lineColor,tickColor:e.tickColor},yAxis:{title:{text:void 0},labels:{style:{color:e.textColor},formatter(){return s(this.value)}},gridLineColor:e.gridLineColor,min:0},tooltip:{shared:!0,formatter(){let e=new Date(this.x),t=`<b>${`${e.getMinutes().toString().padStart(2,`0`)}:${e.getSeconds().toString().padStart(2,`0`)}`}</b><br/>`;return this.points?.forEach(e=>{t+=`<span style="color:${e.color}">\u25CF</span> ${e.series.name}: <b>${s(e.y,!0)}</b><br/>`}),t}},plotOptions:{areaspline:{fillOpacity:.3,marker:{enabled:!1},lineWidth:2,states:{hover:{lineWidth:3}},threshold:null}},series:i.seriesConfig.map((t,n)=>({type:`areaspline`,name:t.name,color:t.color||e.seriesColors[n]||G.default.getOptions().colors?.[n]||`hsl(${n*120}, 70%, 50%)`,data:i.initialData?.[n]||[]}))}}let p={addPoint:(e,t,n)=>{if(l?.series[e]){let r=l.series[e].data.length>=10;l.series[e].addPoint([t,n],!0,r,{duration:800,easing:`linear`})}},addPoints:e=>{if(!l)return;let t=new Map;e.forEach(e=>{t.has(e.seriesIndex)||t.set(e.seriesIndex,[]),t.get(e.seriesIndex).push({time:e.time,value:e.value})}),t.forEach((e,t)=>{let n=l?.series[t];n&&e.forEach(e=>{let t=n.data.length>=10;n.addPoint([e.time,e.value],!1,t)})}),l.redraw({duration:800,easing:`linear`})},setSeriesData:(e,t)=>{l?.series[e]&&l.series[e].setData(t,!0,!1,!1)}};return n({chartRef:p}),m(()=>{if(!c.value)return;l=G.default.chart(c.value,f()),o(`chartReady`,p);let e=new ResizeObserver(()=>{l&&c.value&&l.setSize(c.value.clientWidth,c.value.clientHeight,!0)});e.observe(c.value),S(()=>{e.disconnect(),l?.destroy()})}),v(()=>i.title,e=>{l&&l.setTitle({text:e})}),v(()=>i.seriesConfig,e=>{l&&(e.forEach((e,t)=>{l.series[t]&&l.series[t].update({type:`areaspline`,name:e.name,color:e.color},!1)}),l.redraw())},{deep:!0}),v(()=>d.curTheme,()=>{requestAnimationFrame(()=>{if(l){let e=V();l.update({chart:{backgroundColor:e.backgroundColor},title:{style:{color:e.textColor}},legend:{itemStyle:{color:e.textColor},itemHoverStyle:{color:e.textColorHover}},xAxis:{labels:{style:{color:e.textColor}},lineColor:e.lineColor,tickColor:e.tickColor},yAxis:{labels:{style:{color:e.textColor}},gridLineColor:e.gridLineColor}},!0,!1,!1)}})}),(n,r)=>(_(),u(`div`,K,[t.isLoading?(_(),u(`div`,q,[...r[0]||=[e(`span`,{class:`loading loading-lg loading-dots`},null,-1)]])):a(``,!0),e(`div`,{ref_key:`containerRef`,ref:c,class:E([`h-full w-full`,{"opacity-0":t.isLoading}])},null,2)]))}}),Y=Object.assign(J,{__name:`RealtimeLineChart`}),X=i(R(),1),Z={class:`relative h-full w-full`},Q={key:0,class:`absolute inset-0 flex items-center justify-center`},ne=o({__name:`HighchartsAutoSize`,props:{options:{},isLoading:{type:Boolean,default:!1}},setup(t){let n=t,r=g(),i,o=k();function s(){let e=V();return{chart:{animation:{duration:300},backgroundColor:e.backgroundColor},credits:{enabled:!1},accessibility:{enabled:!1},legend:{itemStyle:{color:e.textColor},itemHoverStyle:{color:e.textColorHover}},title:{style:{color:e.textColor}}}}return m(()=>{if(!r.value)return;let e=s(),t={...e,...n.options,chart:{...e.chart,...n.options.chart}};i=X.default.chart(r.value,t);let a=r.value.clientWidth,o=r.value.clientHeight,c=new ResizeObserver(()=>{if(i&&r.value){let e=r.value.clientWidth,t=r.value.clientHeight;(e!==a||t!==o)&&(a=e,o=t,i.setSize(e,t,!1))}});c.observe(r.value),S(()=>{c.disconnect(),i?.destroy()})}),v(()=>n.options,e=>{i&&i.update(e,!0,!1,!1)},{deep:!0}),v(()=>o.curTheme,()=>{requestAnimationFrame(()=>{if(i){let e=V();i.update({chart:{backgroundColor:e.backgroundColor},title:{style:{color:e.textColor}},legend:{itemStyle:{color:e.textColor},itemHoverStyle:{color:e.textColorHover}},xAxis:{labels:{style:{color:e.textColor}},lineColor:e.lineColor,tickColor:e.tickColor},yAxis:{labels:{style:{color:e.textColor}},gridLineColor:e.gridLineColor}},!0,!1,!1)}})}),(n,i)=>(_(),u(`div`,Z,[t.isLoading?(_(),u(`div`,Q,[...i[0]||=[e(`span`,{class:`loading loading-lg loading-dots`},null,-1)]])):a(``,!0),e(`div`,{ref_key:`containerRef`,ref:r,class:E([`h-full w-full`,{"opacity-0":t.isLoading}])},null,2)]))}}),re=Object.assign(ne,{__name:`HighchartsAutoSize`}),ie={class:`rounded-box bg-base-300 p-4`},ae={class:`mb-4 flex flex-col gap-2`},oe={class:`flex items-center justify-between gap-2`},se={class:`flex items-center gap-2`},ce={class:`text-xl font-bold text-base-content`},le=[`data-tip`],ue={class:`btn btn-circle text-info btn-ghost btn-xs`},de={class:`hidden sm:inline`},fe={key:0,class:`stats stats-vertical bg-base-200 shadow sm:stats-horizontal`},pe={class:`stat py-2`},me={class:`stat-title text-xs`},he={class:`stat-value text-lg text-primary`},ge={key:0,class:`stat py-2`},_e={class:`stat-title text-xs`},ve=[`title`],ye={class:`flex items-center gap-1`},be={class:`stat py-2`},xe={class:`stat-title text-xs`},Se={class:`stat-value text-lg`},Ce={class:`stat py-2`},we={class:`stat-title text-xs`},Te={class:`stat-value text-lg`},Ee={class:`stat py-2`},De={class:`stat-title text-xs`},Oe={class:`stat-value text-lg text-secondary`},ke={class:`hidden overflow-x-auto rounded-md lg:block`},Ae={class:`table w-full table-zebra`},je={class:`bg-base-200`},Me={class:`text-base-content`},Ne={class:`text-base-content`},Pe={class:`text-base-content`},Fe={class:`text-base-content`},Ie={class:`text-base-content`},Le={class:`text-base-content`},Re={class:`text-base-content`},ze={key:0},Be={colspan:`7`,class:`text-center text-base-content/70`},Ve={class:`text-base-content`},He={class:`font-mono text-base-content`},Ue=[`title`],We={class:`flex items-center gap-1`},Ge={class:`text-sm`},Ke={class:`text-base-content`},qe={class:`text-base-content`},Je={class:`font-bold text-primary`},Ye=[`title`,`onClick`],Xe={class:`flex flex-col gap-3 lg:hidden`},Ze={key:0,class:`flex gap-2 rounded-lg bg-base-200 p-3`},Qe={class:`text-xs font-semibold text-base-content/60`},$e={class:`flex flex-1 gap-2`},et={key:1,class:`rounded-lg bg-base-200 p-4 text-center text-base-content/70`},tt={class:`card-body p-4`},nt={class:`mb-2 flex items-start justify-between`},rt={class:`flex-1`},it={class:`text-xs font-semibold text-base-content/60 uppercase`},at={class:`font-mono text-sm font-bold text-base-content`},ot=[`title`,`onClick`],st={key:0,class:`mb-2`},ct={class:`text-xs font-semibold text-base-content/60 uppercase`},lt={class:`text-sm text-base-content`},ut={key:1,class:`mb-2`},dt={class:`text-xs font-semibold text-base-content/60 uppercase`},ft={class:`flex items-center gap-1 text-sm text-base-content`},pt={class:`text-xs text-base-content/60`},mt={class:`grid grid-cols-3 gap-2`},ht={class:`text-xs font-semibold text-base-content/60 uppercase`},gt={class:`text-sm font-medium text-base-content`},_t={class:`text-xs font-semibold text-base-content/60 uppercase`},vt={class:`text-sm font-medium text-base-content`},yt={class:`text-xs font-semibold text-base-content/60 uppercase`},$={class:`text-sm font-bold text-primary`},bt=o({__name:`DataUsageTable`,setup(t){let{t:r,locale:i}=T(),o=I();k();let m=g(`total`),h=g(`desc`),v=w(`showDataUsageTable`,!1),x=e=>L(e).toString();function S(e){m.value===e?h.value=h.value===`asc`?`desc`:`asc`:(m.value=e,h.value=`desc`)}let O=D(()=>{let e=Object.values(o.dataUsageMap),t=m.value,n=h.value;return e.sort((e,r)=>{let i=0;switch(t){case`ip`:i=e.sourceIP.localeCompare(r.sourceIP);break;case`duration`:i=(e.firstSeen?e.lastSeen-e.firstSeen:0)-(r.firstSeen?r.lastSeen-r.firstSeen:0);break;case`total`:i=e.total-r.total;break}return n===`asc`?i:-i})}),A=D(()=>{let e=O.value,t=e.reduce((e,t)=>e+t.upload,0),n=e.reduce((e,t)=>e+t.download,0),r=2**53-1,i=0;e.forEach(e=>{e.firstSeen&&e.firstSeen<r&&(r=e.firstSeen),e.lastSeen&&e.lastSeen>i&&(i=e.lastSeen)});let a=r!==2**53-1&&i>0;return{count:e.length,upload:t,download:n,total:t+n,firstSeen:a?r:void 0,lastSeen:a?i:void 0}});function R(){confirm(r(`confirmClearAll`))&&o.clearDataUsage()}function V(e){o.removeDataUsageEntry(e)}return(t,o)=>(_(),u(`div`,ie,[e(`div`,ae,[e(`div`,oe,[e(`div`,se,[e(`h2`,ce,n(f(r)(`dataUsage`)),1),e(`div`,{class:`tooltip tooltip-top before:ml-4 before:max-w-xs before:rounded-lg before:p-2 before:text-xs before:content-[attr(data-tip)] md:tooltip-right md:before:ml-0 md:before:text-sm lg:before:text-base`,"data-tip":f(r)(`dataUsageInfo`)},[e(`button`,ue,[y(f(N),{size:18})])],8,le),p(e(`input`,{"onUpdate:modelValue":o[0]||=e=>C(v)?v.value=e:null,type:`checkbox`,class:`toggle toggle-primary`},null,512),[[l,f(v)]])]),f(v)?(_(),u(`button`,{key:0,class:`btn btn-sm btn-error`,onClick:R},[y(f(P),{size:16}),e(`span`,de,n(f(r)(`clearAll`)),1)])):a(``,!0)]),f(v)?(_(),u(c,{key:0},[f(A).count>0?(_(),u(`div`,fe,[e(`div`,pe,[e(`div`,me,n(f(r)(`devices`)),1),e(`div`,he,n(f(A).count),1)]),f(A).firstSeen&&f(A).lastSeen?(_(),u(`div`,ge,[e(`div`,_e,n(f(r)(`timeRange`)),1),e(`div`,{class:`stat-value text-sm`,title:f(B)(f(A).firstSeen,f(A).lastSeen,f(i))},[e(`div`,ye,[y(f(M),{size:16}),e(`span`,null,n(f(z)(f(A).firstSeen,f(A).lastSeen)),1)])],8,ve)])):a(``,!0),e(`div`,be,[e(`div`,xe,n(f(r)(`uploadTotal`)),1),e(`div`,Se,n(x(f(A).upload)),1)]),e(`div`,Ce,[e(`div`,we,n(f(r)(`downloadTotal`)),1),e(`div`,Te,n(x(f(A).download)),1)]),e(`div`,Ee,[e(`div`,De,n(f(r)(`grandTotal`)),1),e(`div`,Oe,n(x(f(A).total)),1)])])):a(``,!0),e(`div`,ke,[e(`table`,Ae,[e(`thead`,null,[e(`tr`,je,[e(`th`,Me,n(f(r)(`macAddress`)),1),e(`th`,Ne,[e(`button`,{class:`flex items-center gap-1 hover:text-primary`,onClick:o[1]||=e=>S(`ip`)},[e(`span`,null,n(f(r)(`ipAddress`)),1),f(m)===`ip`&&f(h)===`asc`?(_(),d(f(F),{key:0,size:14})):f(m)===`ip`&&f(h)===`desc`?(_(),d(f(j),{key:1,size:14})):a(``,!0)])]),e(`th`,Pe,[e(`button`,{class:`flex items-center gap-1 hover:text-primary`,onClick:o[2]||=e=>S(`duration`)},[e(`span`,null,n(f(r)(`duration`)),1),f(m)===`duration`&&f(h)===`asc`?(_(),d(f(F),{key:0,size:14})):f(m)===`duration`&&f(h)===`desc`?(_(),d(f(j),{key:1,size:14})):a(``,!0)])]),e(`th`,Fe,n(f(r)(`upload`)),1),e(`th`,Ie,n(f(r)(`download`)),1),e(`th`,Le,[e(`button`,{class:`flex items-center gap-1 hover:text-primary`,onClick:o[3]||=e=>S(`total`)},[e(`span`,null,n(f(r)(`total`)),1),f(m)===`total`&&f(h)===`asc`?(_(),d(f(F),{key:0,size:14})):f(m)===`total`&&f(h)===`desc`?(_(),d(f(j),{key:1,size:14})):a(``,!0)])]),e(`th`,Re,n(f(r)(`actions`)),1)])]),e(`tbody`,null,[f(O).length===0?(_(),u(`tr`,ze,[e(`td`,Be,n(f(r)(`noDataUsageYet`)),1)])):(_(!0),u(c,{key:1},b(f(O),t=>(_(),u(`tr`,{key:t.sourceIP,class:`hover`},[e(`td`,Ve,n(t.macAddress||f(r)(`na`)),1),e(`td`,He,n(t.sourceIP),1),e(`td`,{class:`text-base-content`,title:t.firstSeen?f(B)(t.firstSeen,t.lastSeen,f(i)):`-`},[e(`div`,We,[y(f(M),{size:14,class:`text-base-content/60`}),e(`span`,Ge,n(t.firstSeen?f(z)(t.firstSeen,t.lastSeen):`-`),1)])],8,Ue),e(`td`,Ke,n(x(t.upload)),1),e(`td`,qe,n(x(t.download)),1),e(`td`,Je,n(x(t.total)),1),e(`td`,null,[e(`button`,{class:`btn text-error btn-ghost btn-xs hover:bg-error/20`,title:f(r)(`remove`),onClick:e=>V(t.sourceIP)},[y(f(P),{size:14})],8,Ye)])]))),128))])])]),e(`div`,Xe,[f(O).length>0?(_(),u(`div`,Ze,[e(`div`,Qe,n(f(r)(`sortBy`)),1),e(`div`,$e,[e(`button`,{class:E([`btn flex-1 btn-xs`,f(m)===`ip`?`btn-primary`:`btn-ghost`]),onClick:o[4]||=e=>S(`ip`)},[s(n(f(r)(`ipShort`))+` `,1),f(m)===`ip`&&f(h)===`asc`?(_(),d(f(F),{key:0,size:12})):f(m)===`ip`&&f(h)===`desc`?(_(),d(f(j),{key:1,size:12})):a(``,!0)],2),e(`button`,{class:E([`btn flex-1 btn-xs`,f(m)===`duration`?`btn-primary`:`btn-ghost`]),onClick:o[5]||=e=>S(`duration`)},[s(n(f(r)(`duration`))+` `,1),f(m)===`duration`&&f(h)===`asc`?(_(),d(f(F),{key:0,size:12})):f(m)===`duration`&&f(h)===`desc`?(_(),d(f(j),{key:1,size:12})):a(``,!0)],2),e(`button`,{class:E([`btn flex-1 btn-xs`,f(m)===`total`?`btn-primary`:`btn-ghost`]),onClick:o[6]||=e=>S(`total`)},[s(n(f(r)(`total`))+` `,1),f(m)===`total`&&f(h)===`asc`?(_(),d(f(F),{key:0,size:12})):f(m)===`total`&&f(h)===`desc`?(_(),d(f(j),{key:1,size:12})):a(``,!0)],2)])])):a(``,!0),f(O).length===0?(_(),u(`div`,et,n(f(r)(`noDataUsageYet`)),1)):a(``,!0),(_(!0),u(c,null,b(f(O),t=>(_(),u(`div`,{key:t.sourceIP,class:`card bg-base-200 shadow-md`},[e(`div`,tt,[e(`div`,nt,[e(`div`,rt,[e(`div`,it,n(f(r)(`ipAddress`)),1),e(`div`,at,n(t.sourceIP),1)]),e(`button`,{class:`btn btn-circle text-error btn-ghost btn-xs`,title:f(r)(`remove`),onClick:e=>V(t.sourceIP)},[y(f(P),{size:16})],8,ot)]),t.macAddress?(_(),u(`div`,st,[e(`div`,ct,n(f(r)(`macAddress`)),1),e(`div`,lt,n(t.macAddress),1)])):a(``,!0),t.firstSeen?(_(),u(`div`,ut,[e(`div`,dt,n(f(r)(`timeRange`)),1),e(`div`,ft,[y(f(M),{size:14,class:`text-base-content/60`}),e(`span`,null,n(f(z)(t.firstSeen,t.lastSeen)),1)]),e(`div`,pt,n(f(B)(t.firstSeen,t.lastSeen,f(i))),1)])):a(``,!0),o[7]||=e(`div`,{class:`divider my-2`},null,-1),e(`div`,mt,[e(`div`,null,[e(`div`,ht,n(f(r)(`upload`)),1),e(`div`,gt,n(x(t.upload)),1)]),e(`div`,null,[e(`div`,_t,n(f(r)(`download`)),1),e(`div`,vt,n(x(t.download)),1)]),e(`div`,null,[e(`div`,yt,n(f(r)(`total`)),1),e(`div`,$,n(x(t.total)),1)])])])]))),128))])],64)):a(``,!0)])]))}}),xt=Object.assign(bt,{__name:`DataUsageTable`}),St={class:`flex flex-col gap-2 lg:h-full`},Ct={class:`stats grid w-full shrink-0 stats-vertical grid-cols-2 bg-primary shadow lg:flex lg:stats-horizontal`},wt={class:`grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3`},Tt={class:`card h-72 bg-base-200 p-2 shadow-sm lg:h-80`},Et={class:`card h-72 bg-base-200 p-2 shadow-sm lg:h-80`},Dt={class:`card h-72 bg-base-200 p-2 shadow-sm lg:h-80`},Ot={class:`card h-72 bg-base-200 p-2 shadow-sm lg:h-80`},kt={class:`card h-72 bg-base-200 p-2 shadow-sm lg:h-80`},At={class:`card h-72 bg-base-200 p-2 shadow-sm lg:h-80`},jt={class:`mx-auto mt-4 footer block footer-horizontal rounded-box bg-neutral p-4 text-center text-lg font-bold text-neutral-content`},Mt=o({__name:`overview`,setup(i){let{t:a}=T();r({title:D(()=>a(`overview`))});let o=A(),c=I(),l=t(),d=k(),p=e=>L(e).toString(),m=D(()=>(d.curTheme,V())),h=g(),b=g(),S=g(),C=D(()=>[{name:a(`down`),color:m.value.seriesColors[0]},{name:a(`up`),color:m.value.seriesColors[1]}]),w=D(()=>[[...o.trafficChartHistory.download],[...o.trafficChartHistory.upload]]),E=D(()=>[{name:a(`memory`),color:m.value.seriesColors[2]}]),O=D(()=>[[...o.memoryChartHistory]]),j=D(()=>[{name:a(`activeConnections`),color:m.value.seriesColors[3]}]),M=D(()=>[[...o.connectionCountHistory]]),N=D(()=>({chart:{type:`pie`,backgroundColor:m.value.backgroundColor,animation:!1},credits:{enabled:!1},accessibility:{enabled:!1},title:{text:a(`flow`),style:{color:m.value.textColor}},tooltip:{pointFormatter(){let e=this.y||0,t=this.percentage||0;return`${this.name}<br/>${L(e).toString()} (${t.toFixed(1)}%)`}},plotOptions:{pie:{allowPointSelect:!0,cursor:`pointer`,dataLabels:{enabled:!1},showInLegend:!0,animation:!1}},legend:{itemStyle:{color:m.value.textColor},itemHoverStyle:{color:m.value.textColorHover}},series:[{type:`pie`,name:a(`flow`),data:[{name:a(`downloadTotal`),y:c.latestConnectionMsg?.downloadTotal||0,color:m.value.seriesColors[0]},{name:a(`uploadTotal`),y:c.latestConnectionMsg?.uploadTotal||0,color:m.value.seriesColors[1]}]}]})),P=D(()=>{let e=c.activeConnections,t=0,n=0,r=0;return e.forEach(e=>{let i=e.metadata.network?.toLowerCase()||``;i===`tcp`?t++:i===`udp`?n++:r++}),{chart:{type:`pie`,backgroundColor:m.value.backgroundColor,animation:!1},credits:{enabled:!1},accessibility:{enabled:!1},title:{text:a(`networkTypes`),style:{color:m.value.textColor}},tooltip:{pointFormatter(){let e=this.y||0,t=this.percentage||0;return`${this.name}: <b>${e}</b> (${t.toFixed(1)}%)`}},plotOptions:{pie:{allowPointSelect:!0,cursor:`pointer`,dataLabels:{enabled:!1},showInLegend:!0,animation:!1}},legend:{itemStyle:{color:m.value.textColor},itemHoverStyle:{color:m.value.textColorHover}},series:[{type:`pie`,name:a(`networkTypes`),data:[{name:a(`tcp`),y:t,color:m.value.seriesColors[0]},{name:a(`udp`),y:n,color:m.value.seriesColors[1]},...r>0?[{name:a(`other`),y:r,color:m.value.seriesColors[2]}]:[]]}]}}),F=D(()=>{let e=c.speedGroupByName,t=Object.entries(e).sort(([,e],[,t])=>t-e).slice(0,5),n=t.map(([e])=>e),r=t.map(([,e])=>e);return{chart:{type:`bar`,backgroundColor:m.value.backgroundColor,animation:!1},credits:{enabled:!1},accessibility:{enabled:!1},title:{text:a(`topProxies`),style:{color:m.value.textColor}},xAxis:{categories:n,labels:{style:{color:m.value.textColor}},lineColor:m.value.lineColor},yAxis:{title:{text:void 0},labels:{style:{color:m.value.textColor},formatter(){return`${L(this.value).toString()}/s`}},gridLineColor:m.value.gridLineColor,min:0},tooltip:{formatter(){return`<b>${n[this.x]||this.x}</b><br/>${L(this.y).toString()}/s`}},legend:{enabled:!1},plotOptions:{bar:{dataLabels:{enabled:!1},animation:!1}},series:[{type:`bar`,name:a(`traffic`),data:r,color:m.value.seriesColors[0]}]}}),R=o.trafficChartHistory.download.at(-1)?.[0]??0,z=o.memoryChartHistory.at(-1)?.[0]??0,B=o.connectionCountHistory.at(-1)?.[0]??0;return v(()=>o.latestTraffic,e=>{if(e&&h.value?.chartRef){let t=Date.now();t>R&&(h.value.chartRef.addPoints([{seriesIndex:0,time:t,value:e.down},{seriesIndex:1,time:t,value:e.up}]),R=t)}}),v(()=>o.latestMemory?.inuse,e=>{if(e&&b.value?.chartRef){let t=Date.now();t>z&&(b.value.chartRef.addPoint(0,t,e),z=t)}}),v(()=>c.latestConnectionMsg?.connections?.length,e=>{if(e!==void 0&&S.value?.chartRef){let t=Date.now();t>B&&(S.value.chartRef.addPoint(0,t,e),B=t)}}),(t,r)=>{let i=W,d=Y,m=re,g=xt;return _(),u(`div`,St,[e(`div`,Ct,[y(i,{label:f(a)(`upload`)},{default:x(()=>[s(n(p(f(o).latestTraffic?.up||0))+`/s `,1)]),_:1},8,[`label`]),y(i,{label:f(a)(`download`)},{default:x(()=>[s(n(p(f(o).latestTraffic?.down||0))+`/s `,1)]),_:1},8,[`label`]),y(i,{label:f(a)(`uploadTotal`)},{default:x(()=>[s(n(p(f(c).latestConnectionMsg?.uploadTotal||0)),1)]),_:1},8,[`label`]),y(i,{label:f(a)(`downloadTotal`)},{default:x(()=>[s(n(p(f(c).latestConnectionMsg?.downloadTotal||0)),1)]),_:1},8,[`label`]),y(i,{label:f(a)(`activeConnections`)},{default:x(()=>[s(n(f(c).latestConnectionMsg?.connections?.length||0),1)]),_:1},8,[`label`]),y(i,{label:f(a)(`memoryUsage`)},{default:x(()=>[s(n(p(f(o).latestMemory?.inuse||0)),1)]),_:1},8,[`label`])]),e(`div`,wt,[e(`div`,Tt,[y(d,{ref_key:`trafficChartRef`,ref:h,title:f(a)(`traffic`),"series-config":f(C),"initial-data":f(w),"is-loading":!f(o).latestTraffic},null,8,[`title`,`series-config`,`initial-data`,`is-loading`])]),e(`div`,Et,[y(m,{options:f(N),"is-loading":!f(c).latestConnectionMsg?.connections?.length},null,8,[`options`,`is-loading`])]),e(`div`,Dt,[y(d,{ref_key:`memoryChartRef`,ref:b,title:f(a)(`memory`),"series-config":f(E),"initial-data":f(O),"is-loading":!f(o).latestMemory},null,8,[`title`,`series-config`,`initial-data`,`is-loading`])]),e(`div`,Ot,[y(d,{ref_key:`connectionsChartRef`,ref:S,title:f(a)(`connectionsChart`),"series-config":f(j),"initial-data":f(M),"is-loading":!f(c).latestConnectionMsg?.connections?.length,"value-mode":`number`},null,8,[`title`,`series-config`,`initial-data`,`is-loading`])]),e(`div`,kt,[y(m,{options:f(P),"is-loading":!f(c).latestConnectionMsg?.connections?.length},null,8,[`options`,`is-loading`])]),e(`div`,At,[y(m,{options:f(F),"is-loading":Object.keys(f(c).speedGroupByName).length===0},null,8,[`options`,`is-loading`])])]),y(g),e(`footer`,jt,n(f(l).currentEndpoint?.url),1)])}}});export{Mt as default};